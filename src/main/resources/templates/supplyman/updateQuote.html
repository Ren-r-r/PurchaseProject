<!DOCTYPE HTML>
<!-- saved from url=(0075)http://169.254.158.100/zzdl/Jiffprovider/jiffprov_look.asp?intSuppCode=4779 -->
<HTML lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{public::header('aa')}"><TITLE></TITLE>
    <META http-equiv=Content-Type content="text/html; charset=utf-8">
    <META content="MSHTML 6.00.2900.5626" name=GENERATOR><LINK
            href="jiffprov_look.files/style.css" rel=stylesheet></HEAD>
<BODY>
<SCRIPT LANGUAGE="JAVASCRIPT">
    function chck()
    {  var  count=0;
        for (var i=0;i<form.length;i++)
            if ((form[i].type == "radio") && (form[i].checked))
                count++;
        if (count==0)
        { return false;  }
        else
        { return true;   }
    }

    function Add(SourceList,TargetList)
    {
        var nIndex = SourceList.selectedIndex;
        var nCount = 0;
        if (nIndex == -1)
        {
            // Process continue only if at least one item selected
            //alert("请先选择一项!");
            return;
        }
        for (i=0;i<SourceList.length;i++)
        {
            if (SourceList.options(i).selected==true)
            {
                if (inSouceList(SourceList.options(i).value,TargetList)==false)
                {
                    var objSelected = new Option(SourceList[i].text, SourceList[i].value);
                    TargetList.options[TargetList.length] = objSelected;
                }
            }
        }
        for (var i=0;i<TargetList.options.length;i++)
        {
            TargetList.options(i).selected=true;
        }
        if(navigator.appName=="Netscape")
        {
            history.go(0)
        }
    }
    function inSouceList(SourceListOption,TargetList)
    {
        for (i=0;i<TargetList.length;i++)
        {
            if (TargetList.options[i].value==SourceListOption)
            {
                return true;
            }
        }
        return false;
    }
    function Remove(SelectList)
    {
        var nIndex = SelectList.selectedIndex;
        var nCount = 0;
        if (nIndex == -1)
        {
            // Process continue only if at least one item selected
            //alert("请先选择一项!");
            return;
        }
        while(nCount<SelectList.length)
        {
            if (SelectList.options(nCount).selected==true)
            {
                SelectList.options[nCount] = null;
            }
            else
            {
                nCount++;
            }
        }
        if(navigator.appName=="Netscape")
        {
            history.go(0)
        }
    }
    function enter()
    {
        var srcEle = window.event.srcElement;
        var tmp;
        tmp = window.showModalDialog("pub_pub.Dialog_Date?vc_input=" + srcEle.value);
        if ( tmp.indexOf("/") != -1)
        {
            srcEle.value = tmp;
        }
        return;
    }
    function check_num()
    {
        if (window.event.keyCode > 57 || window.event.keyCode < 48)
        {
            window.event.returnValue = false;
        }
    }
    function check_blank()
    {
        if (window.event.keyCode < 48)
        {
            window.event.returnValue = false;
        }
    }

    function check_num_dot()
    {
        if (window.event.keyCode > 57 || window.event.keyCode < 46)
        {
            window.event.returnValue = false;
        }
        else
        {
            if(window.event.keyCode==47)
            {
                window.event.returnValue = false;
            }
            if(window.event.keyCode==46)
            {
                if (window.event.srcElement.value.indexOf(".")!=-1)
                {
                    window.event.returnValue = false;
                }
            }
        }
    }

    function submitonce(theform)
    {
        if (document.all || document.getElementById)
        {
            for (i=0;i<theform.length;i++)
            {
                var tempobj = theform.elements[i]
                if (tempobj.type.toLowerCase() =="button")
                    tempobj.disabled = true
            }
        }
    }

    function CheckAll()
    {
        var i = 0;
        for (i=0; i < window.document.forms[0].elements.length; i++)
        {
            if(window.document.forms[0].elements[i].Chk<3)
            {
                if(window.document.forms[0].elements[i].value=="")
                {
                    alert(window.document.forms[0].elements[i].alt);
                    window.document.forms[0].elements[i].focus();
                    return;
                }
                else if (window.document.forms[0].elements[i].Chk==2)
                {
                    if (NotNumber(window.document.forms[0].elements[i].value))
                    {
                        alert("提示信息：\n不是有效的数字，请重新输入。");
                        window.document.forms[0].elements[i].focus();
                        return;
                    }
                }
            }
            else if(window.document.forms[0].elements[i].Chk==3)
            {
                if(window.document.forms[0].elements[i].value!="")
                {
                    if (NotNumber(window.document.forms[0].elements[i].value))
                    {
                        alert("提示信息：\n不是有效的数字，请重新输入。");
                        window.document.forms[0].elements[i].focus();
                        return;
                    }
                }
            }
        }
        window.document.forms[0].submit();
        return true;
    }
    function NotNumber(Field)
    {
        var j = 0;
        var k = 0;
        for (var i=0; i<Field.length; i++)
        {
            var ch=Field.substring(i,i+1);
            if((ch>="0")&&(ch<="9"))
            {
                j=0;
            }
            else if(ch==".")
            {
                k++;
            }
            else
            {
                j=1;
                break;
            }
        }
        if ((j==0)&&(k<2))
        {
            return false;
        }
        else
        {
            return true;
        }
    }
    function openwindown(page)
    {
        window.open(page,"newuser","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=700,height=400,left=100,top=150");
    }
</SCRIPT>
<center>

    <form name="form" action="/UpdateQuoteD" method="post">
        <TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0     width="100%"  bgColor=#336699 borderColorLight=#006699 border=0>
            <tr>
                <td>
                    <table cellpadding="3" cellspacing="1" border="0" width="100%">

                        <tr bgcolor="#ffffff">
                            <td width="100%" colspan="6" bgcolor="#ffffff" align="center" height="30"><b><h2><font color="#0070C0">报价维护</b></td></tr>
                        <tr bgcolor="#ffffff">
                            <td width="100%" colspan="6" bgcolor="#ffffff" align="center" height="22"><center><font color="blue"><b>&nbsp;请不要在输入金额的地方输入单位（如：元、圆），直接输入数字即可。</b></font></center></td></tr>

                    </table></td></tr></table>

        <TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0     width="100%"  bgColor=#336699 borderColorLight=#006699 border=0>
            <tr>
                <td>
                    <table cellpadding="3" cellspacing="1" border="0" width="100%">

                        <tr>
                            <td colspan=6 align="middle" bgcolor="#99ccff"><B>需求计划
                                <input type="hidden" name="p_orderno0" value="1000201011133069">
                                <input type="hidden" name="p_ordernum0" value="1">
                            </td>
                        </tr>
                        <tr class=t2>
                            <input type="hidden" name="id" th:value="${session.quoteById.id}">
                            <input type="hidden" name="id" th:value="${session.quote.id}">
                            <td >物资编码</td>
                            <td >[[${session.quoteById.materialCode}]]<br></td>
                            <td >物资名称</td>
                            <td >[[${session.quoteById.materialName}]]<br></td>
                            <td >计量单位</td>
                            <td >[[${session.quoteById.measureUnit}]]<br></td>
                        </tr>

                        <tr bgcolor="#FFFFFF">
                            <td nowrap >单价(元/含税)</td>
                            <td nowrap ><input type="text" id="unitPrice" name="unitPrice" size=8 Chk=2 onkeypress="check_num_dot()" onblur="get_jsz(0)"  onfocus="clearzero(form.p_intPrice,0)"  maxlength=12 th:value="${session.quoteById.unitPrice}"></td>
                            <td nowrap >数量</td>
                            <td nowrap ><input type="text" id="amount" name="amount" size=8 Chk=2 onkeypress="check_num_dot()"  onblur="get_jsz(0)" onfocus="clearzero(form.p_intQty,0)"  maxlength=12 th:value="${session.quoteById.amount}"></td>
                            <td nowrap >总价(元/含税)</td>
                            <td nowrap ><input type="text" id="sumPrice" name="sumPrice" size=8  readonly style="border: #333333; background-color: #f0f0ff;border-style: solid; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px" th:value="${session.quoteById.sumPrice}"></td>
                        </tr>
                        <tr bgcolor="#FFFFFF">
                            <td nowrap >运杂费(元/含税)</td>
                            <td nowrap ><input type="text" id="mixPrice" name="mixPrice" size=8 Chk=3 onkeypress="check_num_dot()"  onblur="get_jsz(0)"  onfocus="clearzero(form.p_intFree,0)"  maxlength=12 th:value="${session.quoteById.mixPrice}"></td>
                            <td nowrap >其他费用(元/含税)</td>
                            <td nowrap ><input type="text" id="otherPrice" name="otherPrice" size=8 Chk=3 onkeypress="check_num_dot()"  onblur="get_jsz(0)"  onfocus="clearzero(form.p_intOther,0)"  maxlength=12 th:value="${session.quoteById.otherPrice}"></td>
                            <td nowrap >总计(元/含税)</td>
                            <td nowrap ><input type="text" id="totalPrice" name="totalPrice" size=8 readonly style="border: #333333; background-color: #f0f0ff;border-style: solid; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px" th:value="${session.quoteById.totalPrice}"></td>
                        </tr>
                        <tr bgcolor="#FFFFFF">
                            <td nowrap >起始到货期</td>
                            <td nowrap ><input type="text" id="startDate" name="startDate" size="10" readonly th:value="${session.quoteById.startDate}">&nbsp;
                            </td>
                            <td nowrap >结束到货期</td>
                            <td nowrap ><input type="text"  size="10" readonly th:value="${session.quoteById.endDate}">&nbsp;
                            <td nowrap ></td>
                            <td nowrap ></td>
                            </td>
                        </tr>


                        <input type="hidden" name="HBSUM" value="3">

                    </table></td></tr></table>

        <TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0     width="100%"  bgColor=#336699 borderColorLight=#006699 border=0>
            <tr>
                <td>
                    <table cellpadding="3" cellspacing="1" border="0" width="100%">

                        <tr bgcolor="#f2f8ff">
                            <td nowrap><a href="javascript:SumNum()">数量合计</a></td>
                            <td><input type="text" id="sumAmount" name="sumAmount" size="25.5" readonly onclick="ClearNum()" class="border" th:value="${session.quote.sumAmount}"></td>
                            <td nowrap>总金额(元)</td><td><input type="text" id="overallPrice" name="overallPrice" size="25.5" readonly class="border" th:value="${session.quote.overallPrice}"></td>
                        </tr>

                        <tr bgcolor="#f2f8ff">
                            <td nowrap>报价书标题</td>
                            <td><input type="text" id="queTitle" name="queTitle" th:value="${session.quote.queTitle}" style="width:100%" maxlength="30"></td>
                            <td nowrap>报价有效期</td>
                            <td><input type="text" size="10" readonly th:value="${#dates.format(session.quote.endDate,'yyyy-MM-dd')}">&nbsp;
                            </td>
                        </tr>
                        <tr bgcolor="#f2f8ff">
                            <td nowrap>报价说明</td>
                            <td colspan="3" style="width:100%"><textarea name="quoRemark" rows="4" style="width:100%">[[${session.quote.quoRemark}]]</textarea></td>
                        </tr>

                    </table></td></tr></table>

        <p Align="center">
            <input  class="easyui-linkbutton c6" type="submit" style="width:90px"  name="TJBJ"></input>
            <a  class="easyui-linkbutton" onclick=" javascript:form_back()" style="width:90px" name="TJBJ">返回</a>
        </p>
    </form>
</center>
<script language="javascript">
    function form_subt()
    { if (form.overallPrice.value !="")
    {
        alert("提示信息：\n请输入有效的数据。");
        return;
    }
    else
    { if ( form.quoRemark.value.length>200)
    {
        alert("提示信息：\n说明文字不能超过200字。");
        return;
    }
    else
    {  if (confirm("在修改报价前请确定输入的报价内容完全正确。\n按确定按钮提交修改报价，按取消按钮重新修改报价。")==true)
    {
        submitonce(form);
        CheckAll(); }
    else
    { return; }
    }
    }
    }
    function form_back()
    {  window.location.href="/Project_list";
    }
</script>
<script language="javascript">
    //失去焦点时计算总价，总金额
    function get_jsz(k){
        alert("11");
    }
    function clearzero(p_item,k)
    { if (p_item.length>=1)
    {
        if (p_item[k].value==0)
            p_item[k].value="";
    }
    else
    { if (p_item.value==0)
        p_item.value="";
    }
    }
    function SumNum()
    {var v_sl=0;
        var v_zsl=0;
        if (form.amount.length>=2)
        {for (i=0;i<form.amount.length;i++)
            if (form.amount[i].value=="" || form.amount[i].value.length==0 )
                v_sl=0;
            else
            { v_sl=form.amount[i].value;
                v_zsl=parseFloat(v_zsl)+parseFloat(v_sl);
            }
            form.sumAmount.value=v_zsl;
        }
        else
        {
            form.sumAmount.value=form.amount.value;
        }
    }
    function ClearNum()
    { form.sumAmount.value="";  }
</script>
</BODY></HTML>
